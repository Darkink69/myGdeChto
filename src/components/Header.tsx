import { observer } from "mobx-react-lite";
import store from "../store/store";
import Menu from "./Hamburger";
import MenuCities from "./MenuCities";
import { useState, useEffect } from "react";

const Header = observer(() => {
  const [menu, setMenu] = useState(false);
  const [viewCities, setViewCities] = useState(false);

  const setViewMenu = () => {
    setMenu(!menu);
    setViewCities(false);
  };

  const changeCity = () => {
    setMenu(false);
    setViewCities(!viewCities);
    // console.log(store.cities.length);
    // store.setCurentCity(
    //   store.currentCity < store.cities.length - 1 ? store.currentCity + 1 : 0
    // );
    // console.log(store.currentCity);
  };

  useEffect(() => {
    setViewCities(false);
  }, [store.currentCity]);

  return (
    <>
      <div className="fixed bg-[url('../src/assets/header_bg.jpg')] z-50 sm:h-[100px] h-[100px] w-full shadow-md">
        <div className="flex items-center 2xl:pl-40 pl-4 ">
          <svg
            className="cursor-pointer m-1 hover:drop-shadow-lg"
            onClick={() =>
              window.scrollTo({
                top: 0,
                left: 0,
                behavior: "smooth",
              })
            }
            width="90"
            height="90"
            viewBox="0 0 100 100"
            fill="none"
          >
            <circle cx="50" cy="50" r="50" fill="white" />
            <path
              d="M24.9629 65.0029L31.0545 64.9512L31.1062 68.1548L27.8508 68.0358L27.9854 76.6116L25.1492 76.6271L24.9681 64.9926L24.9629 65.0029Z"
              fill="#055F91"
            />
            <path
              d="M31.3555 78.7189L31.4072 75.1996C31.4072 75.1996 31.8937 75.1996 32.6235 75.184C33.0065 72.529 34.0778 64.8848 34.0778 64.8848L38.1354 65.0038L39.3361 75.0495C40.1021 75.0495 40.5886 75.0339 40.5886 75.0339L40.6196 78.7551L37.3332 78.7034L37.2814 77.4664L34.3107 77.4509L34.2589 78.7189H31.3555ZM36.6448 75.0961L36.1118 68.5697L35.3096 75.1271C35.7443 75.1116 36.1946 75.1116 36.6448 75.0961Z"
              fill="#055F91"
            />
            <path
              d="M41.5146 64.9215L47.9892 64.937L48.0203 67.4213H44.3974L44.3456 69.3879L46.7005 69.3207V71.6238L44.3456 71.6911L44.3301 73.725L48.2997 73.6733L48.2687 76.6595L41.3076 76.644L41.5095 64.9111L41.5146 64.9215Z"
              fill="#055F91"
            />
            <path
              d="M57.1852 76.7152H54.0955L54.2766 71.8916C54.2766 71.8916 52.8223 73.6617 51.0367 73.5426C49.2357 73.4081 48.3662 71.8088 48.5835 69.4695C48.7854 67.1353 49.0338 65.0651 49.0338 65.0651L51.6371 64.915C51.6371 64.915 51.0212 70.2044 52.8378 70.0233C53.7746 69.9405 54.2404 68.719 54.2714 67.5028C54.3232 66.2865 54.2559 65.0186 54.2559 65.0186L56.9937 65.003L57.1749 76.7204L57.1852 76.7152Z"
              fill="#055F91"
            />
            <path
              d="M60.1916 68.3886C58.8563 68.3731 57.8057 68.3575 57.8057 68.3575V65.0866L65.0151 64.8848L65.3309 68.4921C65.3309 68.4921 64.2129 68.461 62.8466 68.4403C63.064 71.6957 63.3797 76.6487 63.3797 76.6487L59.4566 76.747L60.1916 68.3886Z"
              fill="#055F91"
            />
            <path
              d="M70.1871 76.6685C64.08 76.5495 64.8615 64.9512 70.8237 64.9512C76.7859 64.9512 76.2994 76.7824 70.1871 76.6685ZM70.4407 68.191C68.7225 68.543 68.5724 73.1285 70.4563 72.9318C72.3401 72.73 72.1435 67.8236 70.4407 68.191Z"
              fill="#055F91"
            />
            <path
              d="M65.7821 58.8596C65.87 58.8596 77.4218 48.6845 77.075 41.8735C76.7283 35.0626 70.1761 34.1982 65.7821 34.1982C61.3881 34.1982 54.7479 35.1454 54.4891 41.8735C54.1423 48.7725 65.6993 58.9424 65.7821 58.8596Z"
              fill="#055F91"
            />
            <path
              d="M60.0745 45.9011C60.1314 45.9943 60.209 46.2168 60.3591 46.3772C61.1406 47.2208 61.1458 47.2985 60.3643 48.1007C60.0383 48.4371 59.971 48.8097 60.1676 49.1772C60.3591 49.5343 60.768 49.7568 61.1613 49.6533C61.3684 49.5964 61.5806 49.4515 61.7358 49.2962C62.3879 48.6493 62.6674 48.6338 63.2729 49.2807C63.775 49.8086 64.1942 49.819 64.691 49.3014C65.3794 48.5924 66.1609 48.5872 66.8492 49.2859C67.3668 49.8086 67.7705 49.8086 68.2673 49.2807C68.8729 48.6389 69.2041 48.6131 69.7941 49.3014C70.2444 49.8293 71.0052 49.7258 71.3105 49.3118C71.621 48.8925 71.5538 48.4319 71.1087 48.0231C70.4566 47.4175 70.4514 47.0759 71.0828 46.4911C71.6469 45.9684 71.6521 45.544 71.0931 45.0264C70.441 44.4209 70.441 43.7895 71.0828 43.1995C71.6366 42.6923 71.6469 42.3093 71.1138 41.7969C70.4462 41.1551 70.4514 40.8705 71.1242 40.208C71.5952 39.7422 71.6262 39.2195 71.207 38.8055C70.793 38.3966 70.2599 38.4432 69.8096 38.9193C69.2041 39.5611 68.8677 39.5714 68.2673 38.9452C67.7187 38.3759 67.3616 38.3759 66.813 38.9607C66.223 39.587 65.3224 39.5921 64.748 38.9763C64.1787 38.3656 63.8008 38.3655 63.2471 38.9711C62.714 39.5559 62.2948 39.5456 61.7462 38.9452C61.3735 38.5363 61.0319 38.4277 60.6438 38.5933C60.2504 38.7641 59.9606 39.204 60.0745 39.6025C60.1469 39.8509 60.3333 40.089 60.5196 40.2753C61.063 40.8136 61.0734 41.2017 60.5144 41.7348C59.8726 42.3455 59.8778 42.6302 60.5558 43.2668C61.0785 43.7584 61.0785 44.4727 60.5299 44.9591C60.2815 45.1817 60.0434 45.3939 60.0641 45.8959L60.0745 45.9011ZM65.7986 47.7436C64.9602 47.7436 64.1217 47.7539 63.2885 47.7436C62.4086 47.728 62.0205 47.3399 62.0101 46.4497C61.9946 44.9126 61.9998 43.3806 62.0101 41.8435C62.0101 40.9585 62.3672 40.5341 63.2626 40.5134C64.9602 40.472 66.6577 40.4772 68.3553 40.5237C69.2144 40.5444 69.556 40.9533 69.5612 41.8176C69.5767 43.3754 69.5767 44.9333 69.5612 46.4911C69.5508 47.3347 69.1472 47.728 68.3139 47.7436C67.4755 47.7591 66.6422 47.7436 65.8038 47.7436H65.7986Z"
              fill="white"
            />
            <path
              d="M66.4598 45.4248C66.3511 45.1867 66.2735 44.9693 66.1648 44.7675C65.8543 44.193 65.3781 43.8462 64.7105 43.8825C64.0532 43.9187 63.5719 44.2603 63.3338 44.8865C63.0854 45.5386 62.956 46.2114 63.075 46.9671C64.8813 46.9671 66.672 46.9671 68.4576 46.9671C68.5507 45.4972 67.9918 45.0521 66.4546 45.4248H66.4598Z"
              fill="white"
            />
            <path
              d="M67.9193 43.4631C68.4576 43.4113 68.8561 42.9559 68.8198 42.4177C68.7836 41.8794 68.3178 41.4654 67.7951 41.5068C67.2206 41.5533 66.8428 42.0243 66.9101 42.6143C66.967 43.1112 67.438 43.5045 67.9193 43.4579V43.4631Z"
              fill="white"
            />
            <path
              d="M34.2218 58.8596C34.3098 58.8596 45.8615 48.6845 45.5148 41.8735C45.168 35.0626 38.6158 34.1982 34.2218 34.1982C29.8278 34.1982 23.1824 35.1505 22.9237 41.8787C22.5769 48.7777 34.1338 58.9475 34.2166 58.8647L34.2218 58.8596Z"
              fill="#055F91"
            />
            <path
              d="M36.317 44.2744C36.1203 43.8863 35.8926 43.5033 35.6234 43.1617C34.9662 42.3181 34.2726 41.4952 33.5946 40.6619C33.5481 40.605 33.4704 40.5377 33.4083 40.5377C33.0202 40.5274 32.632 40.5325 32.1973 40.5325C32.1973 42.9185 32.1973 45.2526 32.1973 47.5712C32.1352 47.6023 32.1145 47.6178 32.0937 47.623C32.0627 47.6282 32.0265 47.6333 31.9902 47.6333C31.1104 47.6747 30.3289 48.0008 29.6147 48.5028C29.1851 48.8082 28.8177 49.1705 28.621 49.6777C28.4243 50.1797 28.5951 50.6351 29.0816 50.8577C29.2162 50.9198 29.3663 50.9715 29.5112 50.9819C31.0328 51.1061 32.2594 50.5316 33.2272 49.3775C33.429 49.1342 33.5274 48.8341 33.5222 48.508C33.5118 47.2814 33.5118 46.06 33.5067 44.8334C33.5067 44.7558 33.5274 44.6833 33.5429 44.5591C33.8793 44.6212 34.2002 44.6626 34.5107 44.7454C35.1525 44.9162 35.375 45.2888 35.2456 45.9358C35.2042 46.148 35.1369 46.355 35.08 46.5775C35.2249 46.6862 35.3543 46.7897 35.5251 46.9191C35.7632 46.6086 36.0013 46.3446 36.1979 46.0445C36.5654 45.4803 36.6171 44.8696 36.3118 44.2641L36.317 44.2744Z"
              fill="white"
            />
            <path
              d="M48.982 58.8602C49.1217 58.8602 67.914 42.3089 67.355 31.2333C66.7961 20.1526 56.1345 18.75 48.982 18.75C41.8294 18.75 31.0333 20.2923 30.6089 31.2333C30.05 42.4538 48.8422 59.0051 48.982 58.8602Z"
              fill="#80CCFF"
            />
            <path
              d="M62.3311 30.5043C61.9792 27.8544 61.0735 25.4271 59.7848 23.6726C57.4713 20.3965 53.8485 20.0963 51.8352 23.4501C50.5155 24.0659 44.6982 27.8285 43.2904 27.8544C41.0546 28.2115 38.0942 27.9683 37.5508 30.8459C36.2828 30.939 35.3305 32.0776 35.5013 33.3405L35.698 34.7948C35.8325 36.0369 37.1212 36.9323 38.3323 36.6683C38.7567 37.5792 39.6417 38.252 40.6302 38.428C41.1012 40.8501 40.5785 44.6438 44.0461 44.7732C45.8057 44.7887 47.2083 43.1895 46.9599 41.4453L46.52 38.1537C46.5303 38.1537 54.0296 40.0531 54.0452 40.0583C56.8244 42.7547 60.2972 41.5385 61.6583 37.7603C62.445 35.7264 62.6831 33.149 62.3311 30.4991V30.5043ZM57.6525 38.2624C55.7427 38.6454 54.6869 37.1082 53.7864 35.1519H53.7812C52.8651 32.8384 52.5494 30.1834 52.9428 27.7354H52.9479C53.3516 25.8722 54.0141 24.3247 55.7893 24.2367C60.0798 24.2471 61.8032 37.1289 57.6577 38.2624H57.6525Z"
              fill="#055F91"
            />
            <path
              d="M56.4302 29.0747C56.1921 28.9194 55.923 28.8056 55.6435 28.7331C55.4003 28.671 55.1519 28.6451 54.8931 28.6607C54.8206 28.6607 54.7482 28.671 54.6757 28.6762C54.5463 28.6917 54.4169 28.7228 54.2927 28.759C54.272 28.966 54.2617 29.173 54.2513 29.3904C54.2513 29.4215 54.2513 29.4577 54.2513 29.4887C54.2513 29.6751 54.2461 29.8614 54.2513 30.0477C54.2513 30.0891 54.2513 30.1305 54.2513 30.1719C54.2565 30.3582 54.2668 30.5445 54.2824 30.736C54.2824 30.7774 54.2824 30.8188 54.2927 30.8654C54.3134 31.0931 54.3341 31.326 54.3652 31.5589C54.3652 31.5952 54.3755 31.6314 54.3807 31.6676C54.4066 31.8332 54.4273 31.9989 54.4583 32.1541C54.5619 32.7441 54.7068 33.3134 54.8776 33.8465C55.0432 33.8569 55.2036 33.8465 55.3692 33.831C55.4417 33.8206 55.5141 33.8051 55.5814 33.7896C55.835 33.7327 56.0679 33.6447 56.2853 33.5205C56.5389 33.3807 56.7666 33.1996 56.9529 32.9822C57.4394 32.4336 57.6982 31.6883 57.5947 30.9068C57.4912 30.1253 57.0461 29.4732 56.4302 29.0695V29.0747Z"
              fill="#055F91"
            />
          </svg>

          <div className="relative cursor-pointer" onClick={() => changeCity()}>
            <p className="pl-2 sm:pl-4 font-sans font-bold text-xl sm:text-3xl text-white ">
              {store.titleCities[store.currentCity]}
            </p>
            <svg
              className={
                viewCities
                  ? "rotate-180 absolute sm:top-3 top-2 -right-8 scale-50 sm:scale-100"
                  : "absolute sm:top-4 top-2 -right-8 scale-50 sm:scale-100"
              }
              width="24"
              height="16"
              viewBox="0 0 24 16"
              fill="none"
            >
              <path d="M2 2L12 12L22 2" stroke="#ffffff" strokeWidth="4" />
            </svg>
          </div>

          <div className="transition ease-in-out delay-100 absolute hidden xl:block 2xl:mr-72 xl:mr-32 mr-4 right-0 text-xl text-white hover:text-sky-700 border-2 hover:border-white hover:bg-white rounded-lg border-white p-2 pr-8 pl-8 cursor-pointer ">
            Добавить мероприятие
          </div>

          <div
            className="absolute 2xl:mr-44 mr-4 right-0 cursor-pointer hover:drop-shadow-lg"
            onClick={() => setViewMenu()}
          >
            <svg
              className=""
              width="70"
              height="70"
              viewBox="0 0 70 70"
              fill="none"
            >
              <circle cx="35" cy="35" r="35" fill="#26A69A" />
              <rect x="23" y="25" width="24" height="2.53333" fill="white" />
              <rect
                x="23"
                y="32.5996"
                width="24"
                height="2.53333"
                fill="white"
              />
              <rect
                x="23"
                y="41.4668"
                width="24"
                height="2.53333"
                fill="white"
              />
            </svg>
          </div>
        </div>
      </div>
      <div
        className={menu ? "fixed z-40 w-full h-full bg-emerald-800" : "hidden"}
      >
        <Menu />
      </div>
      <div
        className={
          viewCities ? "fixed z-40 w-full h-[370px] bg-emerald-800" : "hidden"
        }
      >
        <MenuCities />
      </div>
    </>
  );
});

export default Header;
