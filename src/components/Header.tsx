import { observer } from "mobx-react-lite";
import store from "../store/store";
import Menu from "./Hamburger";
import MenuCities from "./MenuCities";
import { useState, useEffect } from "react";

const Header = observer(() => {
  const [menu, setMenu] = useState(false);
  const [viewCities, setViewCities] = useState(false);

  const setViewMenu = () => {
    setMenu(!menu);
    setViewCities(false);
  };

  const changeCity = () => {
    setMenu(false);
    setViewCities(!viewCities);
    // console.log(store.cities.length);
    // store.setCurentCity(
    //   store.currentCity < store.cities.length - 1 ? store.currentCity + 1 : 0
    // );
    // console.log(store.currentCity);
  };

  // const getAddEvent = () => {
  //   store.setEventView(true);
  //   setMenu(store.menuView);
  //   store.setCardsEventsView(false);
  // };

  useEffect(() => {
    // setMenu(store.menuView);
    setMenu(false);
  }, [store.menuView]);

  useEffect(() => {
    setViewCities(false);
  }, [store.currentCity]);

  return (
    <>
      <div className="fixed bg-cover bg-[#FFFCF9] z-50 sm:h-[60px] h-[60px] w-full sm:shadow-md">
        <div className="container mx-auto flex items-center justify-between">
          <svg
            className="cursor-pointer sm:mt-1 mt-1 hover:drop-shadow-lg"
            onClick={() => document.location.reload()}
            width="50"
            height="50"
            viewBox="0 0 50 50"
            fill="none"
          >
            <circle cx="25" cy="25" r="25" fill="white" />
            <path
              d="M12.4814 32.5016L15.5272 32.4758L15.5531 34.0776L13.9254 34.0181L13.9927 38.306L12.5746 38.3137L12.484 32.4965L12.4814 32.5016Z"
              fill="#055F91"
            />
            <path
              d="M15.6777 39.3593L15.7036 37.5996C15.7036 37.5996 15.9469 37.5996 16.3117 37.5918C16.5032 36.2643 17.0389 32.4422 17.0389 32.4422L19.0677 32.5017L19.6681 37.5246C20.051 37.5246 20.2943 37.5168 20.2943 37.5168L20.3098 39.3774L18.6666 39.3515L18.6407 38.733L17.1553 38.7253L17.1295 39.3593H15.6777ZM18.3224 37.5478L18.0559 34.2847L17.6548 37.5634C17.8722 37.5556 18.0973 37.5556 18.3224 37.5478Z"
              fill="#055F91"
            />
            <path
              d="M20.7576 32.4606L23.9948 32.4684L24.0104 33.7105H22.1989L22.1731 34.6939L23.3505 34.6602V35.8118L22.1731 35.8454L22.1653 36.8624L24.1501 36.8365L24.1346 38.3296L20.6541 38.3219L20.755 32.4554L20.7576 32.4606Z"
              fill="#055F91"
            />
            <path
              d="M28.5926 38.3575H27.0477L27.1383 35.9458C27.1383 35.9458 26.4111 36.8308 25.5184 36.7712C24.6178 36.704 24.1831 35.9043 24.2918 34.7347C24.3927 33.5676 24.5169 32.5325 24.5169 32.5325L25.8185 32.4575C25.8185 32.4575 25.5106 35.1021 26.4189 35.0116C26.8873 34.9702 27.1202 34.3595 27.1357 33.7513C27.1616 33.1432 27.128 32.5092 27.128 32.5092L28.4969 32.5015L28.5874 38.3601L28.5926 38.3575Z"
              fill="#055F91"
            />
            <path
              d="M30.0958 34.1941C29.4281 34.1863 28.9028 34.1786 28.9028 34.1786V32.5431L32.5076 32.4422L32.6654 34.2459C32.6654 34.2459 32.1065 34.2303 31.4233 34.22C31.532 35.8477 31.6898 38.3242 31.6898 38.3242L29.7283 38.3733L30.0958 34.1941Z"
              fill="#055F91"
            />
            <path
              d="M35.0938 38.3344C32.0403 38.2749 32.431 32.4758 35.4121 32.4758C38.3932 32.4758 38.15 38.3914 35.0938 38.3344ZM35.2206 34.0957C34.3615 34.2717 34.2864 36.5644 35.2284 36.4661C36.1703 36.3652 36.072 33.912 35.2206 34.0957Z"
              fill="#055F91"
            />
            <path
              d="M32.891 29.4297C32.935 29.4297 38.7109 24.3421 38.5375 20.9366C38.3641 17.5312 35.088 17.099 32.891 17.099C30.694 17.099 27.3739 17.5726 27.2445 20.9366C27.0712 24.3861 32.8496 29.4711 32.891 29.4297Z"
              fill="#055F91"
            />
            <path
              d="M30.0372 22.9504C30.0657 22.9969 30.1045 23.1082 30.1796 23.1884C30.5703 23.6102 30.5729 23.6491 30.1822 24.0502C30.0191 24.2184 29.9855 24.4047 30.0838 24.5884C30.1796 24.767 30.384 24.8782 30.5807 24.8265C30.6842 24.798 30.7903 24.7256 30.8679 24.6479C31.194 24.3245 31.3337 24.3167 31.6365 24.6402C31.8875 24.9041 32.0971 24.9093 32.3455 24.6505C32.6897 24.296 33.0804 24.2934 33.4246 24.6428C33.6834 24.9041 33.8852 24.9041 34.1337 24.6402C34.4364 24.3193 34.602 24.3063 34.897 24.6505C35.1222 24.9145 35.5026 24.8627 35.6553 24.6557C35.8105 24.4461 35.7769 24.2158 35.5543 24.0113C35.2283 23.7086 35.2257 23.5378 35.5414 23.2454C35.8235 22.984 35.826 22.7718 35.5466 22.513C35.2205 22.2103 35.2205 21.8946 35.5414 21.5996C35.8183 21.346 35.8235 21.1545 35.5569 20.8983C35.2231 20.5774 35.2257 20.4351 35.5621 20.1038C35.7976 19.8709 35.8131 19.6096 35.6035 19.4026C35.3965 19.1981 35.1299 19.2214 34.9048 19.4595C34.602 19.7804 34.4338 19.7855 34.1337 19.4724C33.8594 19.1878 33.6808 19.1878 33.4065 19.4802C33.1115 19.7933 32.6612 19.7959 32.374 19.4879C32.0893 19.1826 31.9004 19.1826 31.6235 19.4854C31.357 19.7778 31.1474 19.7726 30.8731 19.4724C30.6868 19.268 30.516 19.2136 30.3219 19.2965C30.1252 19.3818 29.9803 19.6018 30.0372 19.8011C30.0735 19.9253 30.1666 20.0443 30.2598 20.1375C30.5315 20.4066 30.5367 20.6007 30.2572 20.8672C29.9363 21.1726 29.9389 21.3149 30.2779 21.6332C30.5393 21.879 30.5393 22.2361 30.265 22.4794C30.1408 22.5907 30.0217 22.6968 30.0321 22.9478L30.0372 22.9504ZM32.8993 23.8716C32.4801 23.8716 32.0609 23.8768 31.6442 23.8716C31.2043 23.8638 31.0102 23.6698 31.0051 23.2247C30.9973 22.4561 30.9999 21.6901 31.0051 20.9216C31.0051 20.4791 31.1836 20.2669 31.6313 20.2565C32.4801 20.2358 33.3289 20.2384 34.1776 20.2617C34.6072 20.272 34.778 20.4765 34.7806 20.9086C34.7884 21.6875 34.7884 22.4665 34.7806 23.2454C34.7754 23.6672 34.5736 23.8638 34.1569 23.8716C33.7377 23.8794 33.3211 23.8716 32.9019 23.8716H32.8993Z"
              fill="white"
            />
            <path
              d="M33.2299 22.7126C33.1756 22.5935 33.1367 22.4848 33.0824 22.3839C32.9271 22.0967 32.6891 21.9233 32.3552 21.9414C32.0266 21.9595 31.7859 22.1303 31.6669 22.4434C31.5427 22.7695 31.478 23.1059 31.5375 23.4837C32.4406 23.4837 33.336 23.4837 34.2288 23.4837C34.2754 22.7488 33.9959 22.5263 33.2273 22.7126H33.2299Z"
              fill="white"
            />
            <path
              d="M33.9597 21.7316C34.2288 21.7057 34.428 21.478 34.4099 21.2088C34.3918 20.9397 34.1589 20.7327 33.8975 20.7534C33.6103 20.7767 33.4214 21.0122 33.455 21.3072C33.4835 21.5556 33.719 21.7523 33.9597 21.729V21.7316Z"
              fill="white"
            />
            <path
              d="M17.1109 29.4297C17.1549 29.4297 22.9308 24.3421 22.7574 20.9366C22.584 17.5312 19.3079 17.099 17.1109 17.099C14.9139 17.099 11.5912 17.5751 11.4618 20.9392C11.2885 24.3887 17.0669 29.4736 17.1083 29.4322L17.1109 29.4297Z"
              fill="#055F91"
            />
            <path
              d="M18.159 22.1373C18.0606 21.9432 17.9468 21.7517 17.8122 21.5809C17.4836 21.1591 17.1368 20.7477 16.7978 20.331C16.7745 20.3026 16.7357 20.2689 16.7047 20.2689C16.5106 20.2637 16.3165 20.2663 16.0991 20.2663C16.0991 21.4593 16.0991 22.6264 16.0991 23.7857C16.0681 23.8012 16.0577 23.809 16.0474 23.8116C16.0318 23.8141 16.0137 23.8167 15.9956 23.8167C15.5557 23.8374 15.1649 24.0005 14.8078 24.2515C14.593 24.4042 14.4093 24.5853 14.311 24.8389C14.2126 25.0899 14.298 25.3176 14.5413 25.4289C14.6086 25.46 14.6836 25.4858 14.7561 25.491C15.5169 25.5531 16.1302 25.2659 16.6141 24.6888C16.715 24.5672 16.7642 24.4171 16.7616 24.2541C16.7564 23.6408 16.7564 23.0301 16.7538 22.4168C16.7538 22.3779 16.7642 22.3417 16.7719 22.2796C16.9401 22.3107 17.1006 22.3314 17.2558 22.3728C17.5767 22.4582 17.688 22.6445 17.6233 22.9679C17.6026 23.074 17.569 23.1776 17.5405 23.2888C17.613 23.3432 17.6776 23.3949 17.763 23.4596C17.8821 23.3044 18.0011 23.1724 18.0995 23.0223C18.2832 22.7402 18.3091 22.4349 18.1564 22.1321L18.159 22.1373Z"
              fill="white"
            />
            <path
              d="M24.491 29.4301C24.5609 29.4301 33.957 21.1545 33.6775 15.6167C33.398 10.0763 28.0673 9.375 24.491 9.375C20.9147 9.375 15.5166 10.1462 15.3045 15.6167C15.025 21.2269 24.4211 29.5026 24.491 29.4301Z"
              fill="#80CCFF"
            />
            <path
              d="M31.1656 15.2522C30.9896 13.9273 30.5367 12.7136 29.8924 11.8364C28.7357 10.1983 26.9242 10.0482 25.9176 11.7251C25.2577 12.033 22.3491 13.9143 21.6452 13.9273C20.5273 14.1058 19.0471 13.9842 18.7754 15.423C18.1414 15.4696 17.6653 16.0389 17.7506 16.6703L17.849 17.3975C17.9163 18.0185 18.5606 18.4662 19.1662 18.3342C19.3783 18.7897 19.8209 19.1261 20.3151 19.2141C20.5506 20.4251 20.2892 22.3219 22.023 22.3866C22.9029 22.3944 23.6042 21.5948 23.4799 20.7227L23.26 19.0769C23.2652 19.0769 27.0148 20.0266 27.0226 20.0292C28.4122 21.3774 30.1486 20.7693 30.8292 18.8802C31.2225 17.8632 31.3415 16.5745 31.1656 15.2496V15.2522ZM28.8262 19.1312C27.8714 19.3227 27.3435 18.5542 26.8932 17.576H26.8906C26.4326 16.4193 26.2747 15.0918 26.4714 13.8678H26.474C26.6758 12.9362 27.007 12.1624 27.8946 12.1184C30.0399 12.1236 30.9016 18.5645 28.8288 19.1312H28.8262Z"
              fill="#055F91"
            />
            <path
              d="M28.2156 14.5372C28.0966 14.4596 27.962 14.4027 27.8223 14.3664C27.7006 14.3354 27.5764 14.3224 27.447 14.3302C27.4108 14.3302 27.3746 14.3354 27.3383 14.338C27.2737 14.3457 27.209 14.3613 27.1469 14.3794C27.1365 14.4829 27.1313 14.5864 27.1262 14.6951C27.1262 14.7106 27.1262 14.7287 27.1262 14.7442C27.1262 14.8374 27.1236 14.9306 27.1262 15.0237C27.1262 15.0444 27.1262 15.0651 27.1262 15.0858C27.1287 15.179 27.1339 15.2721 27.1417 15.3679C27.1417 15.3886 27.1417 15.4093 27.1469 15.4326C27.1572 15.5464 27.1676 15.6629 27.1831 15.7793C27.1831 15.7975 27.1883 15.8156 27.1908 15.8337C27.2038 15.9165 27.2141 15.9993 27.2297 16.0769C27.2814 16.3719 27.3539 16.6566 27.4393 16.9231C27.5221 16.9283 27.6023 16.9231 27.6851 16.9154C27.7213 16.9102 27.7576 16.9024 27.7912 16.8947C27.918 16.8662 28.0345 16.8222 28.1431 16.7601C28.2699 16.6902 28.3838 16.5997 28.477 16.491C28.7202 16.2167 28.8496 15.844 28.7978 15.4533C28.7461 15.0625 28.5235 14.7365 28.2156 14.5346V14.5372Z"
              fill="#055F91"
            />
          </svg>

          <div className="relative cursor-pointer" onClick={() => changeCity()}>
            <p className="mt-1 sm:-mt-0 font-sans font-bold text-xl sm:text-3xl text-[#545454] ">
              {store.titleCities[store.currentCity]}
            </p>
            <svg
              className={
                viewCities
                  ? "rotate-180 absolute sm:top-4 top-3 -right-8 scale-50 sm:scale-100"
                  : "absolute sm:top-4 top-3 -right-8 scale-50 sm:scale-100"
              }
              width="24"
              height="16"
              viewBox="0 0 24 16"
              fill="none"
            >
              <path d="M2 2L12 12L22 2" stroke="#545454" strokeWidth="4" />
            </svg>
          </div>

          {/* <div
            onClick={() => getAddEvent()}
            className="transition ease-in-out delay-100 absolute hidden xl:block 2xl:mr-72 xl:mr-32 mr-4 right-0 text-xl text-white hover:text-sky-700 border-2 hover:border-white hover:bg-white rounded-lg border-white p-2 pr-8 pl-8 cursor-pointer "
          >
            Добавить мероприятие
          </div> */}

          <div
            className="relative sm:top-1 top-1 cursor-pointer hover:drop-shadow-lg"
            onClick={() => setViewMenu()}
          >
            <svg width="50" height="50" viewBox="0 0 50 50" fill="none">
              <circle
                cx="25"
                cy="25"
                r="25"
                fill="url(#paint0_linear_3409_4)"
              />
              <rect
                x="16.428"
                y="17.857"
                width="17.1429"
                height="1.80952"
                fill="white"
              />
              <rect
                x="16.428"
                y="23.2854"
                width="17.1429"
                height="1.80952"
                fill="white"
              />
              <rect
                x="16.428"
                y="29.619"
                width="17.1429"
                height="1.80952"
                fill="white"
              />
              <defs>
                <linearGradient
                  id="paint0_linear_3409_4"
                  x1="25"
                  y1="0"
                  x2="25"
                  y2="50"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor="#80CCFF" />
                  <stop offset="1" stopColor="#71BAEB" />
                </linearGradient>
              </defs>
            </svg>
          </div>
        </div>
      </div>
      <div
        className={
          menu
            ? "animate-right fixed z-40 w-full sm:w-2/12 right-0 h-full bg-[#FFFCF9] drop-shadow-lg"
            : "hidden"
        }
      >
        <Menu />
      </div>
      <div
        className={
          viewCities
            ? "animate-down fixed z-40 w-full md:h-[370px] h-[500px] bg-[#FFFCF9]"
            : "hidden"
        }
      >
        <MenuCities />
      </div>
    </>
  );
});

export default Header;
